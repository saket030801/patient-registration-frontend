<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patient Registration System</title>
    <link rel="stylesheet" href="styles.css">

    <script type="importmap">
        {
            "imports":{
                "@electric-sql/pglite":"https://cdn.jsdelivr.net/npm/@electric-sql/pglite@0.3.1/dist/index.js",
                "uuid":"https://cdn.jsdelivr.net/npm/uuid@11.1.0/dist/esm/index.js"
            }
        }
    </script>

</head>
<body>
    <header>
        <h1>Patient Registration System</h1>
        <nav>
            <ul>
                <li><a href="#registration" class="active" data-section="registration">Registration</a></li>
                <li><a href="#patient-list" data-section="patient-list">View Patients</a></li>
                <li><a href="#sql-query" data-section="sql-query">SQL Query</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section id="registration" class="section active">
            <h2>Register new patient</h2>
            <form id="registration-form">
                <div class="form-group">
                    <label for="full-name">Name</label>
                   <input type="text" id="full-name" name="full-name" maxlength="100" required>
                   <small class="error" id="full-name-error"></small> 
                </div>
                <div class="form-group">
                    <label for="date-of-birth">Date of Birth</label>
                    <input type="date" id="date-of-birth" name="date-of-birth" required>
                    <small class="error" id="date-of-birth-error"></small>
                </div>

                <div class="form-group">
                    <label for="gender">Gender</label>
                    <select id="gender" name="gender" required>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                        <option value="other">Other</option>
                    </select>
                    <small class="error" id="gender-error"></small>
                </div>

                <div class="form-group">
                    <label for="contact-phone">Contact Phone</label>
                    <input type="tel" id="contact-phone" name="contact-phone">
                    <small class="error" id="contact-phone-error"></small>
                </div>

                <div id="form-feedback" class="feedback"></div>
                
                <button type="submit">Register Patient</button>
                
            </form>
        </section>

        <section id="patient-list" class="section">
            <h2>Patient List</h2>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Patient ID</th>
                            <th>Full Name</th>
                            <th>Date of Birth</th>
                            <th>Gender</th>
                            <th>Contact Phone</th>
                        </tr>
                    </thead>
                    <tbody id="patient-table-body"></tbody>
                </table>
            </div>
        </section>
        <section id="sql-query" class="section">
            <h2>SQL Query</h2>
            <p class="info">Run SQL SELECT queries on the patient database. Only SELECT queries are allowed.</p>
            <div class="query-info">
                <h3>Available Columns:</h3>
                <ul>
                    <li><code>id</code> - Patient ID</li>
                    <li><code>full_name</code> - Patient's full name</li>
                    <li><code>date_of_birth</code> - Date of birth</li>
                    <li><code>contact_phone</code> - Contact phone number</li>
                    <li><code>registration_date</code> - Date of registration</li>
                    <li><code>gender</code> - Patient's gender</li>
                </ul>
                <p class="example">Example: <code>SELECT full_name, date_of_birth FROM patients WHERE gender = 'male'</code></p>
            </div>
            <div class="form-group">
                <textarea id="sql-query-input" placeholder="Enter your SQL query (e.g., SELECT * FROM patients)"></textarea>
                <button id="execute-query">Execute Query</button>
            </div>
            <div id="query-feedback" class="feedback"></div>
            <div class="table-container">
                <table id="query-results">
                    <thead id="query-results-header"></thead>
                    <tbody id="query-results-body"></tbody>
                </table>
            </div>
        </section>
    </main>

    <footer>
        <p><strong>Note :</strong> All data is stored in your browser's local storage.</p>
        <button id="reset-db" class="danger-button">Reset Database</button>
    </footer>

    <script type="module" src="app.js"></script>
    
</body>
</html>